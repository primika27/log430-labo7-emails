# ADR 001 – Adoption d'une Architecture Événementielle avec Apache Kafka pour les Notifications

## Statut

Acceptée

## Contexte

Suite à la transformation de l'application Store Manager en API REST, nous avons identifié le besoin d'implémenter un système de notifications par courriel pour informer les utilisateurs lors de la création ou suppression de leurs comptes. L'approche synchrone traditionnelle présenterait plusieurs limitations :

- Couplage fort entre le service principal et le service de notification
- Impact sur les performances de l'API principale lors de l'envoi de courriels
- Difficulté à ajouter de nouveaux canaux de notification
- Risque de perte de notifications en cas de défaillance temporaire

## Décision

Nous avons décidé d'adopter une architecture événementielle (event-driven) en utilisant Apache Kafka comme broker de messages pour implémenter le microservice de notification Coolriel. Cette architecture utilisera :

- **Apache Kafka** comme broker de messages avec un topic `user-events`
- Le patron **Pub/Sub** pour découpler Store Manager (producteur) de Coolriel (consommateur)
- **Event Sourcing** avec une rétention de 7 jours (max 1GB) pour maintenir l'historique des événements
- Communication **asynchrone** entre les microservices
